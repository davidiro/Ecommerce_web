<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout</title>
    <link rel="stylesheet" href="css/checkout.css" />
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="Home.html">Home</a></li>
                <li><a href="Products.html">Products</a></li>
                <li><a href="About.html">About Us</a></li>
                <li><a href="Contact.html">Contact Us</a></li>
            </ul>
        </nav>
        <h1>One Board Shop</h1>
    </header>

    <main>
        <a href="Products.html" class="back-link">‚Üê Back to Products</a>
        <h2 style="text-align: center; margin-bottom: 2rem;">Checkout</h2>
        
        <div class="checkout-container">
            <!-- Checkout Form -->
            <div class="checkout-section">
                <h2>Billing Information</h2>
                
                <div class="form-group">
                    <label for="fullname">Full Name</label>
                    <input type="text" id="fullname" placeholder="John Doe" required />
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="john@example.com" required />
                </div>

                <div class="form-group">
                    <label for="address">Street Address</label>
                    <input type="text" id="address" placeholder="123 Main Street" required />
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" id="city" placeholder="City" required />
                    </div>
                    <div class="form-group">
                        <label for="state">State/Province</label>
                        <input type="text" id="state" placeholder="State" required />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="zip">Zip Code</label>
                        <input type="text" id="zip" placeholder="12345" required />
                    </div>
                    <div class="form-group">
                        <label for="country">Country</label>
                        <input type="text" id="country" placeholder="Country" required />
                    </div>
                </div>

                <h2 style="margin-top: 2rem;">Payment Information</h2>

                <div class="form-group">
                    <label for="cardname">Cardholder Name</label>
                    <input type="text" id="cardname" placeholder="John Doe" required />
                </div>

                <div class="form-group">
                    <label for="cardnumber">Card Number</label>
                    <input type="text" id="cardnumber" placeholder="1234 5678 9012 3456" required />
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="expiry">Expiry Date</label>
                        <input type="text" id="expiry" placeholder="MM/YY" required />
                    </div>
                    <div class="form-group">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" placeholder="123" required />
                    </div>
                </div>
            </div>

            <!-- Order Summary -->
            <div class="checkout-section">
                <h2>Order Summary</h2>
                
                <div id="cartItems"></div>

                <div class="summary">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span id="subtotal">$0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Shipping:</span>
                        <span id="shipping">$10.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Tax:</span>
                        <span id="tax">$0.00</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span id="total">$10.00</span>
                    </div>
                </div>

                <button class="checkout-btn" id="completeBtn">Complete Purchase</button>
            </div>
        </div>
    </main>

    <script>
        const shippingCost = 10;
        const taxRate = 0.08;

        // Initialize cart from local storage
        function initializeCart() {
            const stored = localStorage.getItem('cart');
            return stored ? JSON.parse(stored) : [];
        }

        let cart = initializeCart();

        function displayCart() {
            const cartContainer = document.getElementById("cartItems");
            
            if (cart.length === 0) {
                cartContainer.innerHTML = '<div class="empty-cart">Your cart is empty</div>';
                document.getElementById("completeBtn").disabled = true;
                updateTotals();
                return;
            }

            cartContainer.innerHTML = cart.map((item, index) => `
                <div class="cart-item">
                    <div class="item-name">${item.name}</div>
                    <div class="item-qty">x${item.quantity}</div>
                    <div class="item-price">$${(item.price * item.quantity).toFixed(2)}</div>
                    <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
                </div>
            `).join('');

            updateTotals();
        }

        function removeItem(index) {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            displayCart();
        }

        function updateTotals() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = subtotal * taxRate;
            const total = subtotal + shippingCost + tax;

            document.getElementById("subtotal").textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById("tax").textContent = `$${tax.toFixed(2)}`;
            document.getElementById("total").textContent = `$${total.toFixed(2)}`;
        }

        document.getElementById("completeBtn").addEventListener("click", () => {
            const fullname = document.getElementById("fullname").value;
            const email = document.getElementById("email").value;
            const address = document.getElementById("address").value;
            const city = document.getElementById("city").value;
            const cardnumber = document.getElementById("cardnumber").value;

            if (!fullname || !email || !address || !city || !cardnumber) {
                alert("Please fill in all required fields");
                return;
            }

            if (cart.length === 0) {
                alert("Your cart is empty");
                return;
            }

            alert(`Order placed successfully!\n\nOrder confirmation sent to ${email}`);
            // Clears the cart after successful checkout
            localStorage.setItem('cart', JSON.stringify([]));
            cart = [];
            displayCart();
        });

        // Initializes the carts display
        displayCart();
    </script>
</body>
</html>